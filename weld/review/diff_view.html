<link rel="stylesheet" data-name="static/vs/editor/editor.main" href="static/vs/editor/editor.main.css">

<p>{{filename}}</p>
<div id="editor" data-type="modified" data-left="{{original.contents}}" data-right="{{modified.contents}}" style="width:100%;height:500px">
</div>

<script>
    var require = {
        paths: {
            'vs': '/static/vs'
        }
    };
</script>
<script src="/static/vs/loader.js"></script>
<script src="/static/vs/editor/editor.main.nls.js"></script>
<script src="/static/vs/editor/editor.main.js"></script>
<script>
    require(["vs/editor/editor.main"], function() {
        var editorElement = document.getElementById("editor");
        var changeType = editorElement.getAttribute("data-type");

        if (changeType == "modified") {
            var diffEditor = monaco.editor.createDiffEditor(editorElement, {
                readOnly: true
            });

            var originalModel = monaco.editor.createModel(editorElement.getAttribute("data-left"), "text/plain");
            var modifiedModel = monaco.editor.createModel(editorElement.getAttribute("data-right"), "text/plain");
            diffEditor.setModel({
                original: originalModel,
                modified: modifiedModel
            });
        } else {
            var content = editorElement.getAttribute("data-left") + editorElement.getAttribute("data-right");
            monaco.editor.create(editorElement, {
                readOnly: true,
                value: content,
                language: "text/plain"
            });
        }
    });
</script>
